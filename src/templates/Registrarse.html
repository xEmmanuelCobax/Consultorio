{% extends 'Vertical-navbar.html' %}

{% block style %}
<style>
    .register-container {
        margin-top: 50px;
    }

    .register-form {
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }

    .register-form h2 {
        margin-bottom: 20px;
        font-weight: bold;
    }
/* 
    .form-control {
        margin-bottom: 15px;
    } */

    .register-button {
        background-color: #00c0f0;
        border-color: #00c0f0;
        color: white;
    }

    .register-button:hover {
        background-color: #008fb3;
        border-color: #008fb3;
    }

    .image-container {
        text-align: center;
    }

    .image-container img {
        max-width: 100%;
        height: auto;
    }

    h1.h2 {
        font-size: 2rem; /* Tamaño más grande */
        color: #e1e1e1; /* Color atractivo */
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Sombra para dar profundidad */
        margin-bottom: 1rem; /* Espacio debajo del título */
        font-weight: bold; /* Hacer el texto más audaz */
        text-align: center;
    }
</style>
{% endblock %}

{% block body %}
<div class="container-fluid">
    <!-- Main content -->
    <div
        class="d-flex justify-content-center flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2 ">Registro</h1>
        <div class="d-flex ms-md-auto">
            <a href="{{url_for('Ingreso')}}" class="btn btn-outline-light me-2">Iniciar sesión</a>
            <a href="{{url_for('Registrarse')}}" class="btn btn-light">Registrarse</a>
        </div>
    </div>
    <div class="container-fluid mb-4 register-container">
        <div class="d-flex justify-content-center align-items-center">
            <div class="col-xl-10">
                <div class="row">
                    <!-- Columnas para la imagen -->
                    <div class="col-xl-4 offset-xl-1 mb-2 mb-xl-0 d-none d-lg-block">
                        <!-- Aquí se coloca la imagen -->
                        <img src="{{url_for('static', filename='img/icons/Doctor Icon.png')}}" class="img-fluid"
                            alt="Phone image" />
                    </div>
                    <!-- Columnas para el formulario -->
                    <div class="col-xl-5 offset-xl-1">
                        <!-- Aquí comienza la sección del formulario -->
                        <form method="post" action="/Registrarse" class="submit-validation" novalidate>
                            <h1 class="fw-bold mb-2 signin__titulo text-center text-white">Registrarse</h1>
                            <!-- NOMBRE -->
                            <div class="form-outline mb-2 text-white">
                                <label for="username">Nombres</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="text" class="form-control my-2 needs-validation alpha name"
                                        id="name" name="nombres" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+"
                                        minlength="2" maxlength="25"
                                        title="Solo se permiten letras y espacios" required/>
                                    <div class="invalid-tooltip">
                                        Por favor, ingresa un nombre válido.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Apellidos input -->
                            <div class="form-outline mb-2 text-white">
                                <div class="row">
                                    <!-- apellido paterno -->
                                    <div class="col-md-5 mb-md-0">
                                        <label for="apellidoPaterno">Apellido paterno</label>
                                        <div class="position-relative">
                                            <input type="text"
                                                class="form-control my-2 needs-validation alpha name"
                                                id="apellidoPaterno" name="apellidoPaterno" minlength="2" maxlength="15"
                                                pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" oninput="this.value = this.value.replace(/[^A-Za-záéíóúÁÉÍÓÚñÑ\s]/g, '')" required/>
                                            <div class="invalid-tooltip">Por favor, ingresa un apellido válido.</div>
                                        </div>
                                    </div>

                                    <!-- apellido materno -->
                                    <div class="col-md-5">
                                        <label for="apellidoMaterno">Apellido materno</label>
                                        <div class="position-relative">
                                            <input type="text"
                                                class="form-control my-2 needs-validation alpha name"
                                                id="apellidoMaterno" name="apellidoMaterno" 
                                                minlength="2" maxlength="15" required
                                                pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+"
                                                oninput="this.value = this.value.replace(/[^A-Za-záéíóúÁÉÍÓÚñÑ\s]/g, '')"/>
                                            <div class="invalid-tooltip">Por favor, ingresa un apellido válido.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Email -->
                            <div class="form-outline mb-2 text-white">
                                <label for="email">Correo electrónico</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="email" class="form-control my-2 needs-validation" id="email" name="email" minlength="3" maxlength="50" pattern="^([a-zA-Z][\w]+(?:\.\w+)?)+@([\w]+(?:\.[a-z]{2,10})+)$" required/>
                                    <div class="invalid-tooltip">Por favor, ingresa un correo válido.</div>
                                </div>
                            </div>

                            <!-- Teléfono -->
                            <div class="form-outline mb-2 text-white">
                                <label for="telefono">Teléfono</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="tel" class="form-control my-2 needs-validation numeric" id="telefono" name="telefono" minlength="10" maxlength="10" pattern="^[0-9]{10}$" required/>
                                    <div class="invalid-tooltip">Por favor, ingresa un apellido válido.</div>
                                </div>
                            </div>

                            <div class="form-outline mb-2 text-white">
                                <label for="fechaNacimiento">Fecha de nacimiento</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="date" class="form-control mt-2 needs-validation simple" id="fechaNacimiento" name="fechaNacimiento" min="1924-01-01" max="{{curdateminusdelta(6574)}}" value="2000-01-01" required/>
                                    <div class="invalid-tooltip">Por favor, ingresa una fecha válida (debes ser mayor de edad).</div>
                                </div>
                            </div>

                            <!-- RFC -->
                            <div class="form-outline mb-2 text-white">
                                <label for="rfc">RFC</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="text" class="form-control my-2 needs-validation mayus" id="rfc" name="rfc" pattern="^[A-Z0-9]+$" minlength="13" maxlength="13" required/>
                                    <div class="invalid-tooltip">El RFC de personas físicas es de 13 caracteres.</div>
                                </div>
                            </div>

                            <!-- Registrarse como doctor??? -->
                            <div class="form-check mb-2 text-white">
                                <input class="form-check-input" type="checkbox" value="1" id="registro-doctor" name="registro-doctor">
                                <label class="form-check-label" for="flexCheckDefault">Registrarse como doctor</label>
                            </div>

                            <!-- Cédula Profesional -->
                            <div class="form-outline mb-2 text-white" id="show-cedula">
                                <label for="cedula">Cédula Profesional</label>
                                <div class="col-sm-10 position-relative">
                                    <input type="text" class="form-control my-2 needs-validation numeric pattern" id="cedula" name="cedula" pattern="^[0-9]+$" minlength="10" maxlength="10" required />
                                    <div class="invalid-tooltip">Una cédula profesional válida consiste en 10 números.</div>
                                </div>
                            </div>

                            <!-- Password input -->
                            <div class="form-outline mb-2 text-white position-relative">
                                <label for="password">Contraseña</label>
                                <div class="col-sm-10">
                                    <div class="input-group has-validation">
                                        <!-- <span class="input-group-text">Contraseña</span> -->
                                        <input type="password" class="form-control needs-validation simple" id="password" name="password" pattern=".{8,}" minlength="8" maxlength="20" required/>
                                        <div class="invalid-tooltip">La contraseña debe al menos tener 8 caracteres de largo.</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex flex-column align-items-left mb-2 sigin__remember ">
                                <div class="text-white">
                                    <a>¿Ya tienes una cuenta?</a>
                                    <a href="" class="forget">Iniciar sesión</a>
                                </div>
                            </div>
                            <!-- Submit button -->
                            <button type="submit" class="btn__form btn btn-primary btn-lg btn-block" id="submitButton">
                                Registrarse
                            </button>
                        </form>
                        <!-- Fin del formulario -->
                    </div>
                    <!-- Fin de la columna -->
                </div>
                <!-- Fin de la fila -->
            </div>
        </div>
    </div>
</div>
<script src="{{url_for('static', filename='js/validaciones.js')}}"></script>
<script>
    const checkbox = document.getElementById('registro-doctor')

    checkbox.addEventListener('change', (event) => {
        if (event.currentTarget.checked) {
            console.log('Elegir doctor')

            document.getElementById('show-cedula').removeAttribute('hidden')
            document.getElementById('cedula').setAttribute('required', 'true')
        } else {
            document.getElementById('show-cedula').setAttribute('hidden', 'true')
            document.getElementById('cedula').removeAttribute('required')
        }
    })
    var event = new Event('change');
    checkbox.dispatchEvent(event);

</script>

{% endblock %}